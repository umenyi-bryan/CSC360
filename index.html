<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSC360 - IMSU Computer Science Portal</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/@wasm/cat-editor@latest/dist/cateditor.js"></script>
    <style>
        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1a237e;
            --primary-dark: #0d47a1;
            --secondary: #00bcd4;
            --accent: #ff4081;
            --success: #4caf50;
            --warning: #ff9800;
            --danger: #f44336;
            --light: #f8fafc;
            --dark: #263238;
            --sidebar: #1e1e1e;
            --editor-bg: #1e1e1e;
            --editor-sidebar: #252526;
            --editor-tab: #2d2d30;
            --editor-active: #1e1e1e;
            --editor-text: #d4d4d4;
            --editor-comment: #6a9955;
            --editor-keyword: #569cd6;
            --editor-string: #ce9178;
            --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --radius: 8px;
            --transition: all 0.3s ease;
        }

        body {
            background-color: var(--light);
            color: var(--dark);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* ===== AUTHENTICATION SYSTEM ===== */
        .auth-container {
            display: flex;
            min-height: 100vh;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            padding: 20px;
        }

        .auth-box {
            background: white;
            border-radius: var(--radius);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 450px;
            overflow: hidden;
        }

        .auth-header {
            background: var(--primary);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .auth-header h1 {
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .auth-tabs {
            display: flex;
            background: #f0f0f0;
        }

        .auth-tab {
            flex: 1;
            padding: 18px;
            text-align: center;
            background: transparent;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            color: #666;
        }

        .auth-tab.active {
            background: white;
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }

        .auth-form {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
        }

        .form-control {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(26, 35, 126, 0.1);
        }

        /* ===== BUTTONS ===== */
        .btn {
            padding: 12px 24px;
            border-radius: 6px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-warning {
            background: var(--warning);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-block {
            width: 100%;
        }

        /* ===== PORTAL LAYOUT ===== */
        .portal-container {
            display: none;
            min-height: 100vh;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            width: 280px;
            background: var(--sidebar);
            color: var(--editor-text);
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            border-right: 1px solid #404040;
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid #404040;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-icon {
            font-size: 1.8rem;
            color: var(--secondary);
        }

        .logo-text h2 {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
        }

        .logo-text span {
            font-size: 0.8rem;
            color: #888;
            display: block;
        }

        .sidebar-menu {
            padding: 20px 0;
            flex: 1;
        }

        .menu-section {
            margin-bottom: 25px;
        }

        .menu-section h4 {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #888;
            margin-bottom: 12px;
            padding: 0 20px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: var(--editor-text);
            text-decoration: none;
            transition: var(--transition);
            border-left: 3px solid transparent;
            margin: 2px 0;
        }

        .menu-item:hover, .menu-item.active {
            background: #2a2d2e;
            color: white;
            border-left-color: var(--secondary);
        }

        .menu-item i {
            width: 20px;
            font-size: 1.1rem;
            margin-right: 12px;
            text-align: center;
        }

        .user-profile {
            padding: 20px;
            border-top: 1px solid #404040;
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(0, 0, 0, 0.2);
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: white;
            font-size: 1rem;
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: #f5f5f5;
        }

        .topbar {
            background: white;
            padding: 16px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e0e0e0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .topbar-left h1 {
            font-size: 1.4rem;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .topbar-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .notification-bell {
            position: relative;
            font-size: 1.2rem;
            color: var(--dark);
            cursor: pointer;
        }

        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--danger);
            color: white;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ===== CONTENT AREA ===== */
        .content-area {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
        }

        .welcome-banner {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 24px;
            border-radius: var(--radius);
            margin-bottom: 24px;
            box-shadow: var(--shadow);
        }

        .welcome-banner h2 {
            font-size: 1.6rem;
            margin-bottom: 8px;
        }

        .welcome-banner p {
            font-size: 0.95rem;
            opacity: 0.9;
            max-width: 700px;
        }

        .hod-info {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-top: 16px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 6px;
        }

        /* ===== VS CODE STYLE EDITOR ===== */
        .editor-section {
            display: none;
        }

        .editor-section.active {
            display: block;
        }

        .editor-wrapper {
            background: var(--editor-bg);
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            height: 600px;
            display: flex;
            flex-direction: column;
        }

        .editor-toolbar {
            background: var(--editor-sidebar);
            padding: 12px 16px;
            border-bottom: 1px solid #404040;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .editor-tabs {
            display: flex;
            background: var(--editor-sidebar);
            border-bottom: 1px solid #404040;
            overflow-x: auto;
        }

        .editor-tab {
            padding: 12px 20px;
            background: var(--editor-tab);
            color: #888;
            cursor: pointer;
            border-right: 1px solid #404040;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
            white-space: nowrap;
            transition: var(--transition);
        }

        .editor-tab.active {
            background: var(--editor-active);
            color: white;
            border-bottom: 1px solid var(--secondary);
        }

        .editor-tab .close {
            margin-left: 8px;
            opacity: 0;
            transition: var(--transition);
        }

        .editor-tab:hover .close {
            opacity: 1;
        }

        .editor-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        #cat-editor {
            width: 100%;
            height: 100%;
        }

        /* Custom Cat Editor styling for VS Code theme */
        .cat-editor {
            background: var(--editor-bg) !important;
            color: var(--editor-text) !important;
        }

        .cat-editor .cm-content {
            font-family: 'Cascadia Code', 'Fira Code', 'Consolas', monospace !important;
            font-size: 14px !important;
            line-height: 1.5 !important;
        }

        .cat-editor .cm-gutters {
            background: var(--editor-sidebar) !important;
            border-right: 1px solid #404040 !important;
            color: #858585 !important;
        }

        .cat-editor .cm-activeLineGutter {
            background: #2a2d2e !important;
        }

        .cat-editor .cm-activeLine {
            background: rgba(42, 45, 46, 0.3) !important;
        }

        .cat-editor .cm-selectionBackground {
            background: #264f78 !important;
        }

        /* Syntax highlighting colors */
        .cm-keyword { color: var(--editor-keyword) !important; }
        .cm-string { color: var(--editor-string) !important; }
        .cm-comment { color: var(--editor-comment) !important; }
        .cm-number { color: #b5cea8 !important; }
        .cm-def { color: #dcdcaa !important; }
        .cm-property { color: #9cdcfe !important; }
        .cm-variable { color: #9cdcfe !important; }
        .cm-type { color: #4ec9b0 !important; }

        .preview-panel {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-top: 24px;
            overflow: hidden;
            height: 400px;
            display: flex;
            flex-direction: column;
        }

        .preview-header {
            background: var(--editor-sidebar);
            color: white;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #404040;
        }

        #preview-frame {
            flex: 1;
            border: none;
            background: white;
        }

        /* ===== ASSIGNMENTS ===== */
        .assignments-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .assignment-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid #e0e0e0;
        }

        .assignment-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
        }

        .assignment-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .assignment-header h4 {
            font-size: 1.1rem;
            color: var(--primary);
        }

        .assignment-status {
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .status-active {
            background: #e3f2fd;
            color: var(--primary);
        }

        .assignment-details p {
            color: #666;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
        }

        /* ===== ADMIN DASHBOARD ===== */
        .admin-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 24px 0;
        }

        .control-card {
            background: white;
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: var(--transition);
            border: 1px solid #e0e0e0;
        }

        .control-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 20px rgba(0, 0, 0, 0.1);
        }

        .control-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin: 0 auto 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: #e3f2fd;
            color: var(--primary);
        }

        /* ===== MODALS ===== */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background: white;
            border-radius: var(--radius);
            width: 100%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            background: var(--primary);
            color: white;
            padding: 20px;
            border-radius: var(--radius) var(--radius) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .modal-body {
            padding: 24px;
        }

        /* ===== NOTIFICATION ===== */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 12px 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* ===== FOOTER ===== */
        .footer {
            background: var(--sidebar);
            color: var(--editor-text);
            padding: 16px 24px;
            text-align: center;
            border-top: 1px solid #404040;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .powered-by {
            background: rgba(255, 255, 255, 0.1);
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 1024px) {
            .sidebar {
                position: fixed;
                left: -280px;
                height: 100vh;
                z-index: 1000;
                box-shadow: 2px 0 10px rgba(0,0,0,0.3);
            }
            
            .sidebar.open {
                left: 0;
            }
            
            .sidebar-toggle {
                display: flex !important;
                position: fixed;
                top: 20px;
                left: 20px;
                z-index: 999;
                background: var(--primary);
                color: white;
                width: 40px;
                height: 40px;
                border-radius: 50%;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                box-shadow: var(--shadow);
            }
            
            .editor-wrapper, .preview-panel {
                height: 500px;
            }
        }

        @media (max-width: 768px) {
            .content-area {
                padding: 16px;
            }
            
            .assignments-grid {
                grid-template-columns: 1fr;
            }
            
            .admin-controls {
                grid-template-columns: 1fr;
            }
            
            .editor-wrapper {
                height: 400px;
            }
            
            .preview-panel {
                height: 300px;
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
                gap: 12px;
            }
            
            .topbar {
                flex-direction: column;
                gap: 12px;
                padding: 12px 16px;
            }
        }

        @media (max-width: 480px) {
            .auth-box {
                max-width: 100%;
            }
            
            .editor-toolbar {
                flex-direction: column;
                gap: 10px;
                align-items: stretch;
            }
            
            .editor-toolbar .btn {
                width: 100%;
                margin-bottom: 5px;
            }
        }

        /* ===== UTILITY CLASSES ===== */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-3 {
            margin-top: 12px;
        }

        .mb-3 {
            margin-bottom: 12px;
        }

        .d-flex {
            display: flex;
        }

        .align-center {
            align-items: center;
        }

        .justify-between {
            justify-content: space-between;
        }

        .flex-wrap {
            flex-wrap: wrap;
        }

        .gap-2 {
            gap: 8px;
        }

        .w-100 {
            width: 100%;
        }

        /* ===== MOBILE TOGGLE ===== */
        .sidebar-toggle {
            display: none;
        }
    </style>
</head>
<body>
    <!-- ===== AUTHENTICATION SCREEN ===== -->
    <div class="auth-container" id="auth-container">
        <div class="auth-box">
            <div class="auth-header">
                <h1><i class="fas fa-laptop-code"></i> CSC360 Portal</h1>
                <p>IMSU Computer Science Department</p>
                <div class="powered-by" style="margin-top: 12px; display: inline-flex;">
                    <i class="fas fa-shield-alt"></i> Secured by BeduSec
                </div>
            </div>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="student">Student Login</button>
                <button class="auth-tab" data-tab="staff">Staff Login</button>
            </div>
            
            <!-- Student Login Form -->
            <form class="auth-form" id="student-login-form">
                <div class="form-group">
                    <label for="student-matric">Matriculation Number</label>
                    <input type="text" id="student-matric" class="form-control" placeholder="CSC/2023/001" required>
                </div>
                
                <div class="form-group">
                    <label for="student-password">Password</label>
                    <input type="password" id="student-password" class="form-control" placeholder="Enter your password" required>
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-sign-in-alt"></i> Login as Student
                    </button>
                </div>
                
                <div class="text-center mt-3">
                    <p style="color: #666; font-size: 0.85rem;">
                        <i class="fas fa-info-circle"></i> Use your IMSU student credentials
                    </p>
                </div>
            </form>
            
            <!-- Staff Login Form -->
            <form class="auth-form hidden" id="staff-login-form">
                <div class="form-group">
                    <label for="staff-email">Staff Email</label>
                    <input type="email" id="staff-email" class="form-control" placeholder="staff@imsu.edu.ng" required>
                </div>
                
                <div class="form-group">
                    <label for="staff-password">Password</label>
                    <input type="password" id="staff-password" class="form-control" placeholder="Enter your password" required>
                </div>
                
                <div class="form-group">
                    <select id="staff-role" class="form-control">
                        <option value="lecturer">Lecturer</option>
                        <option value="hod">Head of Department</option>
                        <option value="admin">Administrator</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <button type="submit" class="btn btn-primary btn-block">
                        <i class="fas fa-user-tie"></i> Login as Staff
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ===== MAIN PORTAL ===== -->
    <div class="portal-container" id="portal-container">
        <!-- Mobile Sidebar Toggle -->
        <div class="sidebar-toggle" id="sidebar-toggle">
            <i class="fas fa-bars"></i>
        </div>

        <div class="app-container">
            <!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="logo-icon">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <div class="logo-text">
                        <h2>CSC360 Portal</h2>
                        <span>IMSU Computer Science</span>
                    </div>
                </div>
                
                <div class="sidebar-menu">
                    <!-- Student Menu -->
                    <div class="menu-section student-menu">
                        <h4>Student Portal</h4>
                        <a href="#" class="menu-item active" data-section="dashboard">
                            <i class="fas fa-home"></i> Dashboard
                        </a>
                        <a href="#" class="menu-item" data-section="assignments">
                            <i class="fas fa-tasks"></i> My Assignments
                        </a>
                        <a href="#" class="menu-item" data-section="materials">
                            <i class="fas fa-book"></i> Course Materials
                        </a>
                        <a href="#" class="menu-item" data-section="editor">
                            <i class="fas fa-code"></i> Code Editor
                        </a>
                        <a href="#" class="menu-item" data-section="grades">
                            <i class="fas fa-chart-line"></i> My Grades
                        </a>
                    </div>
                    
                    <!-- Admin Menu (Hidden for students) -->
                    <div class="menu-section admin-menu hidden">
                        <h4>Administration</h4>
                        <a href="#" class="menu-item" data-section="admin-dashboard">
                            <i class="fas fa-cogs"></i> Admin Dashboard
                        </a>
                        <a href="#" class="menu-item" data-section="manage-assignments">
                            <i class="fas fa-book"></i> Manage Assignments
                        </a>
                        <a href="#" class="menu-item" data-section="manage-students">
                            <i class="fas fa-users"></i> Manage Students
                        </a>
                        <a href="#" class="menu-item" data-section="announcements">
                            <i class="fas fa-bullhorn"></i> Announcements
                        </a>
                        <a href="#" class="menu-item" data-section="reports">
                            <i class="fas fa-chart-pie"></i> Reports
                        </a>
                    </div>
                </div>
                
                <div class="user-profile">
                    <div class="avatar" id="user-avatar">CS</div>
                    <div class="user-info">
                        <h4 id="user-name">Loading...</h4>
                        <p id="user-role">Student</p>
                    </div>
                </div>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <!-- Topbar -->
                <div class="topbar">
                    <div class="topbar-left">
                        <h1>
                            <i class="fas fa-university"></i>
                            <span id="page-title">Student Dashboard</span>
                        </h1>
                    </div>
                    <div class="topbar-right">
                        <div class="notification-bell">
                            <i class="fas fa-bell"></i>
                            <span class="notification-badge" id="notification-count">0</span>
                        </div>
                        <button class="btn btn-danger" id="logout-btn">
                            <i class="fas fa-sign-out-alt"></i> Logout
                        </button>
                    </div>
                </div>

                <!-- Content Area -->
                <div class="content-area" id="content-area">
                    <!-- Welcome Banner -->
                    <div class="welcome-banner" id="welcome-banner">
                        <!-- Loaded dynamically -->
                    </div>

                    <!-- Dashboard Section -->
                    <div class="content-section" id="dashboard-section">
                        <!-- Loaded dynamically -->
                    </div>

                    <!-- Editor Section -->
                    <div class="editor-section" id="editor-section">
                        <!-- Cat Editor loads here -->
                    </div>
                </div>

                <!-- Footer -->
                <footer class="footer">
                    <div class="footer-content">
                        <div class="copyright">
                            &copy; 2023 IMSU Computer Science Department. All rights reserved.
                        </div>
                        <div class="powered-by">
                            <i class="fas fa-shield-alt"></i>
                            <span>Powered by BeduSec | H.O.D: Dr. Comfort Amalahu Ed</span>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
    </div>

    <!-- ===== MODALS ===== -->
    <!-- Submit Assignment Modal -->
    <div class="modal" id="submit-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-upload"></i> Submit Assignment</h3>
                <button class="close-modal" onclick="closeModal('submit-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <!-- Form loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Operation completed successfully!</span>
    </div>

    <script>
        // ===== GLOBAL VARIABLES =====
        let currentUser = null;
        let currentRole = 'student';
        let catEditor = null;
        let currentEditorFile = 'html';
        
        // ===== DEFAULT CODE FOR EDITOR =====
        const defaultCode = {
            html: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IMSU CSC Project</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a237e 0%, #3949ab 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            color: #333;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            max-width: 800px;
            width: 100%;
            text-align: center;
        }
        
        h1 {
            color: #1a237e;
            margin-bottom: 20px;
            font-size: 2.5rem;
        }
        
        p {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #666;
        }
        
        .btn {
            background: #00bcd4;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }
        
        .btn:hover {
            background: #0097a7;
            transform: translateY(-2px);
        }
        
        .features {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 40px;
            flex-wrap: wrap;
        }
        
        .feature {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            min-width: 200px;
            transition: all 0.3s;
        }
        
        .feature:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        
        .feature h3 {
            color: #1a237e;
            margin-bottom: 10px;
        }
        
        #output {
            margin-top: 20px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
            text-align: left;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>IMSU Computer Science Project</h1>
        <p>Welcome to the CSC360 Code Editor. This is a sample project for IMSU Computer Science students. Edit this code to create your own web application.</p>
        
        <button class="btn" id="demoBtn">Click Me!</button>
        <button class="btn" id="resetBtn">Reset</button>
        
        <div id="output">
            <h3>Output Panel</h3>
            <p>Click the button to see the output here.</p>
        </div>
        
        <div class="features">
            <div class="feature">
                <h3>HTML5</h3>
                <p>Modern semantic markup</p>
            </div>
            <div class="feature">
                <h3>CSS3</h3>
                <p>Responsive design</p>
            </div>
            <div class="feature">
                <h3>JavaScript</h3>
                <p>Interactive functionality</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const demoBtn = document.getElementById('demoBtn');
            const resetBtn = document.getElementById('resetBtn');
            const output = document.getElementById('output');
            
            demoBtn.addEventListener('click', function() {
                const now = new Date();
                output.innerHTML = \`
                    <h3>Action Successful! ðŸŽ‰</h3>
                    <p><strong>Time:</strong> \${now.toLocaleTimeString()}</p>
                    <p><strong>Date:</strong> \${now.toLocaleDateString()}</p>
                    <p><strong>Status:</strong> <span style="color: #4CAF50;">Active</span></p>
                    <p style="margin-top: 15px; font-weight: bold;">Welcome to IMSU Computer Science Department!</p>
                    <p>Powered by CSC360 Portal</p>
                \`;
                
                demoBtn.textContent = 'Clicked!';
                demoBtn.style.background = '#4CAF50';
                
                setTimeout(() => {
                    demoBtn.textContent = 'Click Again';
                    demoBtn.style.background = '';
                }, 1500);
            });
            
            resetBtn.addEventListener('click', function() {
                output.innerHTML = \`
                    <h3>Output Panel</h3>
                    <p>Click the button to see the output here.</p>
                \`;
                showAlert('Output reset successfully!');
            });
            
            // Feature interactions
            document.querySelectorAll('.feature').forEach(feature => {
                feature.addEventListener('click', function() {
                    const title = this.querySelector('h3').textContent;
                    showAlert(\`Selected: \${title}\\n\\nGreat choice for your project!\`);
                });
            });
            
            function showAlert(message) {
                alert(message);
            }
            
            console.log('IMSU CSC Project loaded successfully!');
        });
    </script>
</body>
</html>`,
            css: `/* CSS Styles for IMSU CSC Project */

/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
    line-height: 1.6;
    color: #333;
    background-color: #f5f7fa;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
}

/* Header Styles */
.header {
    background: linear-gradient(135deg, #1a237e 0%, #3949ab 100%);
    color: white;
    padding: 40px 20px;
    text-align: center;
    border-radius: 10px;
    margin-bottom: 30px;
    box-shadow: 0 4px 15px rgba(26, 35, 126, 0.2);
}

.header h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    font-weight: 700;
}

.header p {
    font-size: 1.2rem;
    opacity: 0.9;
    max-width: 800px;
    margin: 0 auto;
}

/* Content Section */
.content {
    background: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    margin-bottom: 30px;
}

.content h2 {
    color: #1a237e;
    margin-bottom: 20px;
    font-size: 1.8rem;
    border-bottom: 2px solid #00bcd4;
    padding-bottom: 10px;
}

/* Buttons */
.btn {
    display: inline-block;
    background: #00bcd4;
    color: white;
    padding: 12px 30px;
    border-radius: 30px;
    text-decoration: none;
    border: none;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s;
    margin: 5px;
}

.btn:hover {
    background: #0097a7;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0, 188, 212, 0.3);
}

.btn-primary {
    background: #1a237e;
}

.btn-primary:hover {
    background: #0d47a1;
}

.btn-success {
    background: #4CAF50;
}

.btn-success:hover {
    background: #388E3C;
}

/* Features Grid */
.features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 30px;
}

.feature-card {
    background: #f8f9fa;
    padding: 25px;
    border-radius: 10px;
    text-align: center;
    transition: all 0.3s;
    border: 2px solid transparent;
}

.feature-card:hover {
    transform: translateY(-5px);
    border-color: #00bcd4;
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.feature-card h3 {
    color: #1a237e;
    margin-bottom: 10px;
    font-size: 1.4rem;
}

.feature-card p {
    color: #666;
    font-size: 0.95rem;
}

/* Output Panel */
.output-panel {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
    border-left: 4px solid #00bcd4;
}

.output-panel h3 {
    color: #1a237e;
    margin-bottom: 10px;
}

/* Footer */
.footer {
    background: #263238;
    color: white;
    text-align: center;
    padding: 20px;
    border-radius: 10px;
    margin-top: 30px;
}

.footer p {
    opacity: 0.8;
}

/* Responsive Design */
@media (max-width: 768px) {
    .header {
        padding: 30px 15px;
    }
    
    .header h1 {
        font-size: 2rem;
    }
    
    .header p {
        font-size: 1rem;
    }
    
    .content {
        padding: 20px;
    }
    
    .features {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .btn {
        width: 100%;
        margin: 5px 0;
    }
}

@media (max-width: 480px) {
    .container {
        padding: 10px;
    }
    
    .header h1 {
        font-size: 1.6rem;
    }
    
    .content h2 {
        font-size: 1.4rem;
    }
    
    .feature-card {
        padding: 20px;
    }
}

/* Animations */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

.fade-in {
    animation: fadeIn 0.5s ease;
}

/* Utility Classes */
.text-center { text-align: center; }
.mt-3 { margin-top: 30px; }
.mb-3 { margin-bottom: 30px; }
.p-3 { padding: 30px; }

/* Code Display */
.code-block {
    background: #1e1e1e;
    color: #d4d4d4;
    padding: 20px;
    border-radius: 8px;
    font-family: 'Courier New', monospace;
    overflow-x: auto;
    margin: 20px 0;
}

.code-comment { color: #6a9955; }
.code-keyword { color: #569cd6; }
.code-string { color: #ce9178; }
.code-function { color: #dcdcaa; }`,
            js: `// IMSU Computer Science - JavaScript Code
// CSC360 Portal Code Editor

console.log('IMSU CSC Code Editor initialized successfully!');

// Main application class
class CSC360Editor {
    constructor() {
        this.initialize();
    }
    
    initialize() {
        console.log('Initializing CSC360 Editor...');
        this.setupEventListeners();
        this.loadDefaultProject();
        this.displayWelcomeMessage();
    }
    
    setupEventListeners() {
        // Demo button functionality
        const demoBtn = document.getElementById('demoBtn');
        if (demoBtn) {
            demoBtn.addEventListener('click', () => {
                this.handleDemoClick();
            });
        }
        
        // Reset button functionality
        const resetBtn = document.getElementById('resetBtn');
        if (resetBtn) {
            resetBtn.addEventListener('click', () => {
                this.handleReset();
            });
        }
        
        // Feature cards interaction
        document.querySelectorAll('.feature').forEach(feature => {
            feature.addEventListener('click', (e) => {
                this.handleFeatureClick(e.currentTarget);
            });
        });
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 's') {
                e.preventDefault();
                this.saveCode();
            }
        });
        
        console.log('Event listeners setup completed.');
    }
    
    loadDefaultProject() {
        console.log('Loading default IMSU CSC project...');
        
        // In a real implementation, this would load from local storage or backend
        const defaultProject = {
            name: 'IMSU CSC Project',
            author: 'Computer Science Student',
            date: new Date().toLocaleDateString(),
            description: 'A sample project for IMSU Computer Science students'
        };
        
        console.log('Project loaded:', defaultProject);
        return defaultProject;
    }
    
    displayWelcomeMessage() {
        const messages = [
            "Welcome to IMSU Computer Science Department!",
            "Build amazing projects with CSC360 Editor",
            "Powered by BeduSec Security",
            "H.O.D: Dr. Comfort Amalahu Ed"
        ];
        
        const randomMessage = messages[Math.floor(Math.random() * messages.length)];
        console.log('%c' + randomMessage, 'color: #1a237e; font-size: 14px; font-weight: bold;');
        
        // Display in UI if output panel exists
        const output = document.getElementById('output');
        if (output) {
            const welcomeMsg = document.createElement('div');
            welcomeMsg.className = 'welcome-message';
            welcomeMsg.innerHTML = \`
                <h3>ðŸ‘‹ Welcome to CSC360 Editor</h3>
                <p>\${randomMessage}</p>
                <p>Start editing the code to create your own project!</p>
            \`;
            welcomeMsg.style.cssText = \`
                background: linear-gradient(135deg, #1a237e, #3949ab);
                color: white;
                padding: 20px;
                border-radius: 10px;
                margin-bottom: 20px;
                animation: fadeIn 0.5s ease;
            \`;
            
            if (!output.querySelector('.welcome-message')) {
                output.prepend(welcomeMsg);
            }
        }
    }
    
    handleDemoClick() {
        console.log('Demo button clicked');
        
        const output = document.getElementById('output');
        if (!output) return;
        
        const now = new Date();
        const timestamp = now.toLocaleString();
        
        // Create a more detailed output
        const demoData = {
            action: 'demo_button_click',
            timestamp: timestamp,
            user: currentUser ? currentUser.name : 'Guest',
            role: currentRole,
            department: 'Computer Science',
            institution: 'IMSU'
        };
        
        console.log('Demo action:', demoData);
        
        // Update output display
        output.innerHTML = \`
            <div style="animation: fadeIn 0.5s ease;">
                <h3 style="color: #1a237e; margin-bottom: 15px;">
                    <i class="fas fa-check-circle" style="color: #4CAF50;"></i>
                    Action Successful!
                </h3>
                
                <div style="background: white; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <h4 style="color: #333; margin-bottom: 10px;">Execution Details:</h4>
                    <table style="width: 100%; border-collapse: collapse;">
                        <tr>
                            <td style="padding: 8px; border-bottom: 1px solid #eee;"><strong>Time:</strong></td>
                            <td style="padding: 8px; border-bottom: 1px solid #eee;">\${now.toLocaleTimeString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border-bottom: 1px solid #eee;"><strong>Date:</strong></td>
                            <td style="padding: 8px; border-bottom: 1px solid #eee;">\${now.toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border-bottom: 1px solid #eee;"><strong>User:</strong></td>
                            <td style="padding: 8px; border-bottom: 1px solid #eee;">\${demoData.user}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px;"><strong>Department:</strong></td>
                            <td style="padding: 8px;">\${demoData.department}</td>
                        </tr>
                    </table>
                </div>
                
                <div style="background: #e8f5e9; padding: 15px; border-radius: 8px; border-left: 4px solid #4CAF50;">
                    <h4 style="color: #2e7d32; margin-bottom: 10px;">Status Information:</h4>
                    <p style="margin: 5px 0;">âœ… Code execution successful</p>
                    <p style="margin: 5px 0;">âœ… All systems operational</p>
                    <p style="margin: 5px 0;">âœ… Ready for further development</p>
                </div>
                
                <div style="margin-top: 15px; padding: 10px; background: #e3f2fd; border-radius: 8px;">
                    <p style="margin: 0; color: #1a237e; font-weight: bold;">
                        <i class="fas fa-lightbulb"></i>
                        Tip: Try modifying the code to see live changes!
                    </p>
                </div>
            </div>
        \`;
        
        // Visual feedback for button
        const demoBtn = document.getElementById('demoBtn');
        if (demoBtn) {
            const originalText = demoBtn.textContent;
            const originalBg = demoBtn.style.background;
            
            demoBtn.textContent = 'âœ“ Executed';
            demoBtn.style.background = '#4CAF50';
            demoBtn.style.transform = 'scale(0.95)';
            
            setTimeout(() => {
                demoBtn.textContent = originalText;
                demoBtn.style.background = originalBg;
                demoBtn.style.transform = '';
            }, 1500);
        }
        
        // Show notification
        showNotification('Demo executed successfully! Code is working.');
    }
    
    handleReset() {
        console.log('Resetting output...');
        
        const output = document.getElementById('output');
        if (output) {
            output.innerHTML = \`
                <h3>Output Panel</h3>
                <p>Output has been reset. Click the demo button to see action results.</p>
                <div style="margin-top: 15px; padding: 10px; background: #fff3e0; border-radius: 8px;">
                    <p style="margin: 0; color: #f57c00;">
                        <i class="fas fa-info-circle"></i>
                        Output panel cleared and ready for new results.
                    </p>
                </div>
            \`;
        }
        
        showNotification('Output panel reset successfully');
    }
    
    handleFeatureClick(featureElement) {
        const title = featureElement.querySelector('h3').textContent;
        const description = featureElement.querySelector('p').textContent;
        
        console.log(\`Feature clicked: \${title}\`);
        
        // Create feature info modal
        const modal = document.createElement('div');
        modal.style.cssText = \`
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        \`;
        
        modal.innerHTML = \`
            <div style="background: white; padding: 30px; border-radius: 15px; max-width: 500px; width: 90%; animation: slideIn 0.3s ease;">
                <h3 style="color: #1a237e; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-star" style="color: #FFD700;"></i>
                    \${title}
                </h3>
                <p style="margin-bottom: 20px; line-height: 1.6;">\${description}</p>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
                    <h4 style="color: #666; margin-bottom: 10px;">Learning Tip:</h4>
                    <p style="margin: 0; color: #666;">This technology is essential for modern web development. Practice regularly to master it!</p>
                </div>
                <button onclick="this.parentElement.parentElement.remove()" 
                        style="background: #00bcd4; color: white; border: none; padding: 10px 25px; border-radius: 5px; cursor: pointer; font-weight: bold;">
                    Got it!
                </button>
            </div>
        \`;
        
        document.body.appendChild(modal);
        
        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = \`
            @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
            @keyframes slideIn { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        \`;
        document.head.appendChild(style);
        
        // Close on background click
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                modal.remove();
            }
        });
        
        showNotification(\`Feature info: \${title}\`);
    }
    
    saveCode() {
        console.log('Saving code...');
        showNotification('Code saved successfully (simulated)');
        return true;
    }
}

// Initialize editor when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
    const editor = new CSC360Editor();
    window.csc360Editor = editor; // Make available globally
    
    console.log('%cðŸš€ CSC360 Editor Ready!', 'color: #1a237e; font-size: 16px; font-weight: bold;');
    console.log('%cEdit code and see live preview!', 'color: #666;');
    console.log('%cIMSU Computer Science Department', 'color: #00bcd4; font-weight: bold;');
});

// Utility function to show notifications
function showNotification(message) {
    console.log('Notification:', message);
    // This would show a UI notification in the actual implementation
    alert('Notification: ' + message);
}

// Export for module usage
if (typeof module !== 'undefined' && module.exports) {
    module.exports = { CSC360Editor };
}`
        };

        // ===== AUTHENTICATION FUNCTIONS =====
        function initAuth() {
            // Tab switching
            document.querySelectorAll('.auth-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    document.querySelectorAll('.auth-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    document.getElementById('student-login-form').classList.toggle('hidden', tabId !== 'student');
                    document.getElementById('staff-login-form').classList.toggle('hidden', tabId !== 'staff');
                });
            });

            // Student login
            document.getElementById('student-login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const matric = document.getElementById('student-matric').value;
                const password = document.getElementById('student-password').value;
                
                if (matric && password) {
                    loginUser(matric, password, 'student');
                }
            });

            // Staff login
            document.getElementById('staff-login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('staff-email').value;
                const password = document.getElementById('staff-password').value;
                const role = document.getElementById('staff-role').value;
                
                if (email && password) {
                    loginUser(email, password, role);
                }
            });
        }

        function loginUser(identifier, password, role) {
            currentRole = role;
            
            if (role === 'student') {
                currentUser = {
                    name: "Computer Science Student",
                    matric: identifier,
                    level: "100",
                    department: "Computer Science"
                };
            } else if (role === 'hod') {
                currentUser = {
                    name: "Dr. Comfort Amalahu Ed",
                    email: identifier,
                    position: "Head of Department",
                    department: "Computer Science"
                };
            } else {
                currentUser = {
                    name: "Staff Member",
                    email: identifier,
                    role: role.charAt(0).toUpperCase() + role.slice(1),
                    department: "Computer Science"
                };
            }

            showNotification(`Welcome, ${currentUser.name}!`);
            
            // Show portal
            document.getElementById('auth-container').style.display = 'none';
            document.getElementById('portal-container').style.display = 'block';
            
            // Initialize portal
            initPortal();
        }

        function logout() {
            currentUser = null;
            currentRole = 'student';
            document.getElementById('portal-container').style.display = 'none';
            document.getElementById('auth-container').style.display = 'flex';
            showNotification('Logged out successfully');
        }

        // ===== PORTAL INITIALIZATION =====
        function initPortal() {
            // Update user info
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-role').textContent = currentRole === 'hod' ? 'Head of Department' : 
                                                              currentRole === 'lecturer' ? 'Lecturer' : 'Student';
            document.getElementById('user-avatar').textContent = currentUser.name.split(' ').map(n => n[0]).join('');
            
            // Update welcome banner
            updateWelcomeBanner();
            
            // Show/hide menus based on role
            if (currentRole === 'student') {
                document.querySelector('.student-menu').classList.remove('hidden');
                document.querySelector('.admin-menu').classList.add('hidden');
                showSection('dashboard');
            } else {
                document.querySelector('.student-menu').classList.add('hidden');
                document.querySelector('.admin-menu').classList.remove('hidden');
                showSection('admin-dashboard');
            }
            
            // Setup event listeners
            setupPortalEvents();
        }

        function updateWelcomeBanner() {
            const banner = document.getElementById('welcome-banner');
            
            if (currentRole === 'student') {
                banner.innerHTML = `
                    <h2>Welcome to CSC360 Student Portal</h2>
                    <p>Access your course materials, submit assignments, and practice coding with our professional VS Code-like editor. IMSU Computer Science Department.</p>
                    <div class="hod-info">
                        <i class="fas fa-user-tie hod-icon"></i>
                        <div>
                            <div style="font-weight: 600;">Dr. Comfort Amalahu Ed</div>
                            <div>Head of Department, Computer Science</div>
                        </div>
                    </div>
                `;
            } else if (currentRole === 'hod') {
                banner.innerHTML = `
                    <h2>Administrator Dashboard</h2>
                    <p>Welcome, ${currentUser.name}. Manage assignments, monitor student progress, and oversee the Computer Science department operations.</p>
                    <div class="hod-info">
                        <i class="fas fa-user-shield hod-icon"></i>
                        <div>
                            <div style="font-weight: 600;">Full Administrative Privileges</div>
                            <div>Department: Computer Science</div>
                        </div>
                    </div>
                `;
            }
        }

        // ===== SECTION MANAGEMENT =====
        function showSection(sectionId) {
            // Close mobile sidebar
            if (window.innerWidth <= 1024) {
                document.getElementById('sidebar').classList.remove('open');
            }
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'assignments': 'My Assignments',
                'editor': 'Code Editor',
                'admin-dashboard': 'Admin Dashboard'
            };
            
            document.getElementById('page-title').textContent = titles[sectionId] || 'Portal';
            
            // Update active menu item
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.section === sectionId) {
                    item.classList.add('active');
                }
            });
            
            // Load section content
            loadSectionContent(sectionId);
        }

        function loadSectionContent(sectionId) {
            const contentArea = document.getElementById('content-area');
            
            // Hide all sections
            document.querySelectorAll('.content-section, .editor-section').forEach(section => {
                section.classList.remove('active');
            });
            
            switch(sectionId) {
                case 'dashboard':
                    loadDashboard();
                    document.getElementById('dashboard-section').classList.add('active');
                    break;
                case 'assignments':
                    loadAssignments();
                    document.getElementById('dashboard-section').classList.add('active');
                    break;
                case 'editor':
                    loadCodeEditor();
                    document.getElementById('editor-section').classList.add('active');
                    break;
                case 'admin-dashboard':
                    loadAdminDashboard();
                    document.getElementById('dashboard-section').classList.add('active');
                    break;
                default:
                    contentArea.innerHTML = `
                        <div class="welcome-banner">
                            <h2>${sectionId.replace('-', ' ').toUpperCase()}</h2>
                            <p>This section is under development.</p>
                        </div>
                    `;
            }
        }

        // ===== DASHBOARD FUNCTIONS =====
        function loadDashboard() {
            const section = document.getElementById('dashboard-section');
            
            if (currentRole === 'student') {
                section.innerHTML = `
                    <div class="admin-controls">
                        <div class="control-card">
                            <div class="control-icon">
                                <i class="fas fa-book"></i>
                            </div>
                            <h3>Course Materials</h3>
                            <p>Access lecture notes, slides, and reading materials</p>
                            <button class="btn btn-primary w-100" onclick="showSection('materials')">
                                <i class="fas fa-folder-open"></i> Open
                            </button>
                        </div>
                        
                        <div class="control-card">
                            <div class="control-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <h3>Code Editor</h3>
                            <p>Practice HTML, CSS, and JavaScript with our VS Code-like editor</p>
                            <button class="btn btn-success w-100" onclick="showSection('editor')">
                                <i class="fas fa-play"></i> Start Coding
                            </button>
                        </div>
                        
                        <div class="control-card">
                            <div class="control-icon">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <h3>Assignments</h3>
                            <p>View and submit your course assignments</p>
                            <button class="btn btn-warning w-100" onclick="showSection('assignments')">
                                <i class="fas fa-list"></i> View All
                            </button>
                        </div>
                        
                        <div class="control-card">
                            <div class="control-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <h3>Grades</h3>
                            <p>Check your grades and academic progress</p>
                            <button class="btn btn-danger w-100" onclick="showSection('grades')">
                                <i class="fas fa-eye"></i> View Grades
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        // ===== ASSIGNMENTS FUNCTIONS =====
        function loadAssignments() {
            const section = document.getElementById('dashboard-section');
            
            const assignments = [
                {
                    id: 1,
                    title: "HTML/CSS Portfolio Website",
                    course: "CSC 102",
                    dueDate: "2023-12-20",
                    status: "active",
                    description: "Create a personal portfolio website with responsive design"
                },
                {
                    id: 2,
                    title: "JavaScript Calculator",
                    course: "CSC 102",
                    dueDate: "2023-12-25",
                    status: "active",
                    description: "Build a functional calculator with JavaScript"
                },
                {
                    id: 3,
                    title: "Database Design Project",
                    course: "CSC 201",
                    dueDate: "2024-01-10",
                    status: "upcoming",
                    description: "Design and document a database schema"
                }
            ];
            
            section.innerHTML = `
                <div style="margin-bottom: 24px;">
                    <h2 style="color: var(--primary); margin-bottom: 16px;">
                        <i class="fas fa-tasks"></i> My Assignments
                    </h2>
                    <p>View and submit your course assignments. Click "Submit" to upload your work.</p>
                </div>
                
                <div class="assignments-grid">
                    ${assignments.map(assignment => `
                        <div class="assignment-card">
                            <div class="assignment-header">
                                <h4>${assignment.title}</h4>
                                <span class="assignment-status status-${assignment.status}">
                                    ${assignment.status === 'active' ? 'Active' : 'Upcoming'}
                                </span>
                            </div>
                            <div class="assignment-details">
                                <p><i class="fas fa-book"></i> ${assignment.course}</p>
                                <p><i class="fas fa-calendar-alt"></i> Due: ${assignment.dueDate}</p>
                                <p><i class="fas fa-info-circle"></i> ${assignment.description}</p>
                            </div>
                            <div class="d-flex gap-2 mt-3">
                                <button class="btn btn-primary" onclick="viewAssignment(${assignment.id})">
                                    <i class="fas fa-eye"></i> View
                                </button>
                                <button class="btn btn-success" onclick="submitAssignment(${assignment.id})">
                                    <i class="fas fa-upload"></i> Submit
                                </button>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // ===== CODE EDITOR FUNCTIONS =====
        function loadCodeEditor() {
            const section = document.getElementById('editor-section');
            
            section.innerHTML = `
                <div class="editor-wrapper">
                    <div class="editor-toolbar">
                        <h3 style="color: white; font-size: 1.1rem;">
                            <i class="fas fa-code"></i> IMSU Code Editor
                        </h3>
                        <div class="d-flex gap-2">
                            <button class="btn btn-success" id="run-btn">
                                <i class="fas fa-play"></i> Run
                            </button>
                            <button class="btn btn-primary" id="save-btn">
                                <i class="fas fa-save"></i> Save
                            </button>
                            <button class="btn btn-warning" id="reset-btn">
                                <i class="fas fa-redo"></i> Reset
                            </button>
                        </div>
                    </div>
                    
                    <div class="editor-tabs">
                        <div class="editor-tab active" data-file="html">
                            <i class="fab fa-html5"></i> index.html
                            <span class="close">Ã—</span>
                        </div>
                        <div class="editor-tab" data-file="css">
                            <i class="fab fa-css3-alt"></i> style.css
                            <span class="close">Ã—</span>
                        </div>
                        <div class="editor-tab" data-file="js">
                            <i class="fab fa-js"></i> script.js
                            <span class="close">Ã—</span>
                        </div>
                    </div>
                    
                    <div class="editor-container">
                        <div id="cat-editor"></div>
                    </div>
                </div>
                
                <div class="preview-panel">
                    <div class="preview-header">
                        <h3 style="color: white; font-size: 1.1rem;">
                            <i class="fas fa-eye"></i> Live Preview
                        </h3>
                        <div class="d-flex gap-2">
                            <button class="btn btn-primary" id="refresh-btn">
                                <i class="fas fa-redo"></i> Refresh
                            </button>
                            <button class="btn btn-success" id="fullscreen-btn">
                                <i class="fas fa-expand"></i> Fullscreen
                            </button>
                        </div>
                    </div>
                    <iframe id="preview-frame"></iframe>
                </div>
            `;
            
            // Initialize Cat Editor
            initCatEditor();
            
            // Setup editor events
            setupEditorEvents();
        }

        function initCatEditor() {
            // Initialize Cat Editor with VS Code-like theme
            catEditor = new CatEditor('#cat-editor', {
                language: 'html',
                theme: 'dark',
                fontSize: 14,
                value: defaultCode.html,
                lineNumbers: true,
                autoCloseTags: true,
                autoCloseBrackets: true,
                matchBrackets: true,
                indentUnit: 4,
                tabSize: 4,
                indentWithTabs: false
            });
            
            // Apply custom styling for VS Code look
            setTimeout(() => {
                const editorElement = document.querySelector('.cat-editor');
                if (editorElement) {
                    editorElement.style.backgroundColor = '#1e1e1e';
                    editorElement.style.color = '#d4d4d4';
                }
            }, 100);
            
            // Run initial code
            setTimeout(runEditorCode, 500);
        }

        function setupEditorEvents() {
            // Editor tabs
            document.querySelectorAll('.editor-tab').forEach(tab => {
                tab.addEventListener('click', function(e) {
                    if (e.target.classList.contains('close')) {
                        showNotification('Close tab feature coming soon');
                        return;
                    }
                    
                    const file = this.dataset.file;
                    
                    // Update active tab
                    document.querySelectorAll('.editor-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Switch editor content
                    currentEditorFile = file;
                    switch (file) {
                        case 'html':
                            catEditor.setValue(defaultCode.html);
                            catEditor.setOption('language', 'html');
                            break;
                        case 'css':
                            catEditor.setValue(defaultCode.css);
                            catEditor.setOption('language', 'css');
                            break;
                        case 'js':
                            catEditor.setValue(defaultCode.js);
                            catEditor.setOption('language', 'javascript');
                            break;
                    }
                });
            });

            // Run button
            document.getElementById('run-btn').addEventListener('click', runEditorCode);
            
            // Save button
            document.getElementById('save-btn').addEventListener('click', function() {
                const code = catEditor.getValue();
                localStorage.setItem('csc360_editor_code', code);
                showNotification('Code saved to browser storage');
            });
            
            // Reset button
            document.getElementById('reset-btn').addEventListener('click', function() {
                if (confirm('Reset to default code?')) {
                    catEditor.setValue(defaultCode[currentEditorFile]);
                    showNotification('Editor reset to default');
                }
            });
            
            // Refresh preview button
            document.getElementById('refresh-btn').addEventListener('click', runEditorCode);
            
            // Fullscreen button
            document.getElementById('fullscreen-btn').addEventListener('click', function() {
                const previewFrame = document.getElementById('preview-frame');
                if (document.fullscreenElement) {
                    document.exitFullscreen();
                } else {
                    previewFrame.requestFullscreen().catch(err => {
                        console.error('Fullscreen error:', err);
                    });
                }
            });
        }

        function runEditorCode() {
            if (!catEditor) return;
            
            const htmlCode = currentEditorFile === 'html' ? catEditor.getValue() : defaultCode.html;
            const cssCode = currentEditorFile === 'css' ? catEditor.getValue() : defaultCode.css;
            const jsCode = currentEditorFile === 'js' ? catEditor.getValue() : defaultCode.js;
            
            const previewFrame = document.getElementById('preview-frame');
            const previewDoc = previewFrame.contentDocument || previewFrame.contentWindow.document;
            
            const fullHTML = `
                <!DOCTYPE html>
                <html>
                <head>
                    <meta charset="UTF-8">
                    <meta name="viewport" content="width=device-width, initial-scale=1.0">
                    <title>IMSU Code Preview</title>
                    <style>
                        body {
                            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                            margin: 0;
                            padding: 20px;
                            background: #f5f5f5;
                        }
                        .preview-container {
                            max-width: 1200px;
                            margin: 0 auto;
                            background: white;
                            padding: 30px;
                            border-radius: 10px;
                            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                        }
                        ${cssCode}
                    </style>
                </head>
                <body>
                    <div class="preview-container">
                        ${htmlCode}
                    </div>
                    <script>
                        ${jsCode}
                    <\/script>
                </body>
                </html>
            `;
            
            previewDoc.open();
            previewDoc.write(fullHTML);
            previewDoc.close();
            
            showNotification('Code executed successfully!');
        }

        // ===== ADMIN DASHBOARD =====
        function loadAdminDashboard() {
            const section = document.getElementById('dashboard-section');
            
            section.innerHTML = `
                <div style="margin-bottom: 24px;">
                    <h2 style="color: var(--primary); margin-bottom: 8px;">
                        <i class="fas fa-cogs"></i> Administrator Dashboard
                    </h2>
                    <p>Welcome, ${currentUser.name}. Manage the Computer Science department operations.</p>
                </div>
                
                <div class="admin-controls">
                    <div class="control-card">
                        <div class="control-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Student Management</h3>
                        <p>View and manage student accounts, progress, and enrollments</p>
                        <button class="btn btn-primary w-100" onclick="showSection('manage-students')">
                            <i class="fas fa-user-edit"></i> Manage
                        </button>
                    </div>
                    
                    <div class="control-card">
                        <div class="control-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3>Assignments</h3>
                        <p>Create, edit, and manage course assignments</p>
                        <button class="btn btn-success w-100" onclick="showSection('manage-assignments')">
                            <i class="fas fa-plus"></i> Create New
                        </button>
                    </div>
                    
                    <div class="control-card">
                        <div class="control-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <h3>Analytics</h3>
                        <p>View department statistics and performance reports</p>
                        <button class="btn btn-warning w-100" onclick="showSection('reports')">
                            <i class="fas fa-chart-bar"></i> View Reports
                        </button>
                    </div>
                    
                    <div class="control-card">
                        <div class="control-icon">
                            <i class="fas fa-bullhorn"></i>
                        </div>
                        <h3>Announcements</h3>
                        <p>Post important announcements to students and staff</p>
                        <button class="btn btn-danger w-100" onclick="showSection('announcements')">
                            <i class="fas fa-edit"></i> Create Post
                        </button>
                    </div>
                </div>
                
                <div class="content" style="margin-top: 30px;">
                    <h2>Quick Statistics</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                        <div style="background: #e3f2fd; padding: 20px; border-radius: 8px;">
                            <h3 style="color: var(--primary); margin-bottom: 10px;">Total Students</h3>
                            <p style="font-size: 2rem; font-weight: bold; color: var(--primary);">150</p>
                        </div>
                        <div style="background: #e8f5e9; padding: 20px; border-radius: 8px;">
                            <h3 style="color: var(--success); margin-bottom: 10px;">Active Courses</h3>
                            <p style="font-size: 2rem; font-weight: bold; color: var(--success);">12</p>
                        </div>
                        <div style="background: #fff3e0; padding: 20px; border-radius: 8px;">
                            <h3 style="color: var(--warning); margin-bottom: 10px;">Pending Assignments</h3>
                            <p style="font-size: 2rem; font-weight: bold; color: var(--warning);">45</p>
                        </div>
                        <div style="background: #ffebee; padding: 20px; border-radius: 8px;">
                            <h3 style="color: var(--danger); margin-bottom: 10px;">Department Rating</h3>
                            <p style="font-size: 2rem; font-weight: bold; color: var(--danger);">4.8/5</p>
                        </div>
                    </div>
                </div>
            `;
        }

        // ===== UTILITY FUNCTIONS =====
        function setupPortalEvents() {
            // Menu clicks
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    showSection(this.dataset.section);
                });
            });

            // Logout button
            document.getElementById('logout-btn').addEventListener('click', logout);

            // Mobile sidebar toggle
            document.getElementById('sidebar-toggle').addEventListener('click', function() {
                document.getElementById('sidebar').classList.toggle('open');
            });

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', function(e) {
                const sidebar = document.getElementById('sidebar');
                const toggle = document.getElementById('sidebar-toggle');
                
                if (window.innerWidth <= 1024 && 
                    !sidebar.contains(e.target) && 
                    !toggle.contains(e.target) && 
                    sidebar.classList.contains('open')) {
                    sidebar.classList.remove('open');
                }
            });
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            const text = document.getElementById('notification-text');
            
            text.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // Demo functions for assignments
        function viewAssignment(id) {
            showNotification(`Viewing assignment #${id} - Feature coming soon`);
        }

        function submitAssignment(id) {
            const modal = document.getElementById('submit-modal');
            modal.querySelector('.modal-body').innerHTML = `
                <form onsubmit="event.preventDefault(); closeModal('submit-modal'); showNotification('Assignment submitted successfully!');">
                    <div class="form-group">
                        <label>Assignment Title</label>
                        <input type="text" class="form-control" value="Assignment #${id}" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label>Student Name</label>
                        <input type="text" class="form-control" value="${currentUser.name}" readonly>
                    </div>
                    
                    <div class="form-group">
                        <label>Upload Files</label>
                        <div style="border: 2px dashed #ddd; padding: 30px; text-align: center; border-radius: 8px; cursor: pointer;"
                             onclick="this.querySelector('input').click()">
                            <i class="fas fa-cloud-upload-alt" style="font-size: 2rem; color: var(--primary); margin-bottom: 10px;"></i>
                            <p>Click to upload files (ZIP, HTML, CSS, JS, PDF)</p>
                            <input type="file" style="display: none;" multiple>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Additional Comments</label>
                        <textarea class="form-control" rows="3" placeholder="Any comments about your submission..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-success w-100">
                        <i class="fas fa-paper-plane"></i> Submit Assignment
                    </button>
                </form>
            `;
            
            modal.style.display = 'flex';
        }

        // ===== INITIALIZE APPLICATION =====
        document.addEventListener('DOMContentLoaded', function() {
            initAuth();
            
            // Check for saved login (demo)
            const savedLogin = localStorage.getItem('csc360_login');
            if (savedLogin === 'student') {
                loginUser('CSC/2023/001', 'demo', 'student');
            }
            
            // Close modals when clicking outside
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                    }
                });
            });
            
            // Keyboard shortcuts
            document.addEventListener('keydown', function(e) {
                if (e.ctrlKey && e.key === 'e') {
                    e.preventDefault();
                    showSection('editor');
                }
                if (e.key === 'Escape') {
                    document.querySelectorAll('.modal').forEach(modal => {
                        modal.style.display = 'none';
                    });
                }
            });
        });
    </script>
</body>
</html>
